{% extends './layouts.html' %}
{% block script %}
<script src="../static/submit_form.js" type="text/javascript" defer> </script>
{% endblock %}
{% block form %}
<div class='flex align-center justify-center w-full'>
	<div class='form w-4/5 mt-5'>
		<form class='w-full' id="form">
			<div class='relative'>
				<input name="name" type="text" placeholder="Name" autocomplete="off" required class="input input-bordered w-full max-w-xs my-1 rounded-lg border-accent hover: border-accent-focus my-1 border-1 color-primary-content bg-primary" />
				<input type="text" autocomplete="off" name="email" placeholder="Email" required class="input input-bordered w-full max-w-xs my-1 rounded-lg border-accent hover: border-accent-focus my-1 border-1 color-primary-content bg-primary" />
				<textarea name="content" class="textarea w-full rounded-lg border-accent hover: border-accent-focus my-1 border-1 color-primary-content bg-primary"  placeholder="Post something on my timeline..." required autocomplete="off"></textarea>
				<button type="submit" class="px-3 py-1 m-2 btn float-right justify-end absolute bottom-0 right-0">Post</button>
			</div>
		</form>
	</div>
</div>
{% endblock %}
{% block timeline %}
<div class='flex align-center justify-center w-full'>
	{% if posts %}
	<div class='w-4/5 mt-5'>
		{% for post in posts %}
		<div class='bg-primary color-primary-content my-3 border-2 border-accent hover:border-accent-focus rounded-lg w-full p-4'>
			<p class='color-secondary-content text-sm my-1 px-2 bg-secondary rounded-lg'> {{post.name}} - {{post.created_at|string}} </p>
			<p> {{post.content}} </p>
		</div>
		{% endfor %}
		<!-- pagination -->
		<div class='w-full flex align-center justify-center'>
		<div class="btn-group">
			{% if pg !=  1 %}
				{% set prev = pg - 1 %}
			{% else %} {% set prev = 1 %} {% endif %}
			
			{% set nxt = pg + 1 %}
			<a href="./timeline?pg={{prev}}"> <button class="btn">«</button></a>
			<button class="btn">Page {{pg}}</button>
			<a href="./timeline?pg={{nxt}}"<button class="btn">»</button></a>
		</div>
		</div>
	</div>
	{% else %} {% endif %}
</div>
{% endblock %}
